# 横向联邦学习

## 横向联邦学习算法

Delta中实现的横向联邦学习算法来自Google的经典论文：

 [Practical Secure Aggregation for Privacy-Preserving Machine Learning](https://eprint.iacr.org/2017/281.pdf)

如果需要对横向联邦学习算法有更多了解，可以阅读原始论文，或者参考下面的专栏文章：

{% embed url="https://zhuanlan.zhihu.com/p/408731017" %}

## 横向联邦学习执行流程

Delta中的横向联邦学习的流程的设计，是使用区块链进行协调的。区块链在系统中的作用，是一个去中心化的可信结算中心，可以无需人工干预，自动完成计算任务的审计和结算。对于区块链作用的详细解释，可以参考下面这篇专栏文章：

{% embed url="https://zhuanlan.zhihu.com/p/414433931" %}

使用零知识证明实现了计算结果的自动化验证后，区块链的作用就是对零知识证明进行校验，并在校验之后强制完成自动付款。

当然使用一个中心化的服务，也可以实现同样的功能。尤其是当使用零知识证明实现了计算过程校验后，中心化的服务也无法看到原始数据，其作用仅仅是执行一遍验证逻辑，确认无误后，完成付款。数据所有者的数据隐私性仍然得到了充分的保证。区块链和这个中心化服务相比，就是使用去中心化的多人共识来替代掉了单个服务的决策，防止这个中心化的服务由于各种原因阻碍付款，或者是在中间作弊，比如和数据所有者联合起来，让数据需求方为假的计算结果买单。

区块链也可以做为这个中心化的服务自证清白的一个手段，当数据持有者、数据需求方和中心化服务都持有了同样的整个计算流程中的关键证明数据，中心化服务可以通过这些数据来证明自己没有作弊。即中心化服务将区块链系统做为一个分布式审计系统，来对外证明自己的可靠性。

Delta目前的设计中，还不包括链上结算和付款体系，只包括计算流程中的关键证明数据的链上记录。有些关键数据包括在计算流程中，比如哪些节点加入了计算、最终是否有提交计算结果，Delta中就使用区块链来做这部分流程的协调，保证全部数据都被有效的记录。如果计算流程中不包括审计相关的关键数据，则流程的协调，就不走区块链，通过Delta Node之间的通信解决，以提高任务执行的速度。

Delta中的横向联邦学习的过程分为五步：任务注册、参与者选取、密钥交换和秘密分享、本地训练、安全聚合。

### 任务注册

![Delta - HFL - &#x4EFB;&#x52A1;&#x6CE8;&#x518C;&#x6D41;&#x7A0B;](../.gitbook/assets/b5d17161d77c3a1e27682db9df05923.png)

### 参与者选取

![Delta - HFL - &#x53C2;&#x4E0E;&#x8005;&#x9009;&#x53D6;](../.gitbook/assets/f1ec1ace994a49d0e2f49180b2cac23.png)

### 密钥交换和秘密分享

![Delta - HFL - &#x5BC6;&#x94A5;&#x4EA4;&#x6362;&#x548C;&#x79D8;&#x5BC6;&#x5206;&#x4EAB;](../.gitbook/assets/c74879a461e392e9fee072bb1595421.png)

### 本地训练

![Delta - HFL - &#x672C;&#x5730;&#x8BAD;&#x7EC3;](../.gitbook/assets/76b2d1951085e78124648d4d254477e.png)

### 安全聚合

![Delta - HFL - &#x5B89;&#x5168;&#x805A;&#x5408;](../.gitbook/assets/23c78517c74da7560b8ae02dcad7356.png)



